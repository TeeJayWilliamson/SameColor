<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RGB ColorCraze</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.4/nouislider.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/noUiSlider/14.6.4/nouislider.min.js"></script>
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Bowlby+One+SC" />
    <style>
        body {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            /* background-image: url(CrumpledPaper.png); */
            /*background-color: rgb(82, 82, 82);*/
            background: rgb(0,0,0);
            background: linear-gradient(180deg, rgba(0,0,0,1) 25%, rgba(255,255,255,1) 93%);
        }
        h1 {
            color: #333; /* Dark gray header text */
            font-family: 'Arial', sans-serif; /* Use a modern font */
        }
        #target-color, #user-color {
            width: 200px;
            height: 200px;
            margin: 20px;
            border: 1px solid #333; /* Dark border */
        }
        .slider-container {
            display: flex;
            align-items: center;
            position: relative;
            width: 80%;
            margin: 10px auto;
        }
        .slider {
            margin-left: 30px;
            width: 100%;
            margin-top: 25px;
            background-color: #ffffff; /* Light gray slider track */
        }
        .slider-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            position: absolute;
            top: 50%;
            transform: translate(-50%, -50%);
        }
        .dot-space {
            margin-right: 10px;
        }
        .red-dot, .green-dot, .blue-dot {
            width: 15px; /* Increase dot size */
            height: 15px; /* Increase dot size */
            border-radius: 50%;
            position: absolute;
            top: 80%;
            transform: translate(-50%, -50%);
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5); /* Add a subtle shadow */
        }
        .red-dot {
            background-color: red;
            z-index: 1;
        }
        .green-dot {
            background-color: green;
            z-index: 1;
        }
        .blue-dot {
            background-color: blue;
            z-index: 1;
        }
        .button-container {
            display: flex;
            justify-content: center;
            width: 80%;
            margin: 10px auto;
        }
        button {
            padding: 12px 24px; /* Adjust button padding for better spacing */
            font-size: 18px; /* Increase button text size */
            background-color: #007bff; /* Blue button */
            color: #fff; /* White text on buttons */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 0 10px;
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s; /* Add transitions */
        }
        button:hover {
            background-color: #0056b3; /* Darker blue on hover */
            transform: scale(1.05); /* Slightly scale up on hover */
        }
        p {
            text-align: center;
            font-size: 24px; /* Increase font size for text */
            line-height: 1.5; /* Improve line spacing for readability */
        }
        
        /* Add responsiveness for color-squares */
        .color-squares {
            display: flex;
            background-color: rgba(255, 255, 255, 0.897);
            margin: 20px;
            justify-content: space-between;
            box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1); /* Add shadow to color squares */
            transition: box-shadow 0.3s; /* Add transition for color squares */
        }
        
        /* Media query for screens with a maximum width of 768px (typical mobile devices) */
        @media screen and (max-width: 768px) {
            /* Adjust the color squares size for mobile devices */
            .color-squares {
                flex-direction: row; /* Keep them side by side */
                width: 90%; /* You can adjust this value as needed */
            }
            /* Adjust the logo size for mobile devices */
            .logo {
                max-width: 80%; /* You can adjust this value as needed */
        }}
        
        /* Customize the slider handle with box shadow */
        .slider .noUi-handle {
            background-color: rgba(34, 34, 34, 0.63);
            top: 50%;
            transform: translate(0, -25%);
            border: 2px solid #333; /* Dark border for the handle */
            box-shadow: 0px 0px 5px rgba(0, 0, 0, 0.5); /* Add a subtle shadow */
            transition: background-color 0.3s, transform 0.3s, box-shadow 0.3s, border 0.3s; /* Add transitions */
        }
        #stats{
            font-family: 'Bowlby One SC', sans-serif;
            color: black;
        }
    </style>
</head>
<body>
    <img class="logo" src="logo.png" alt="RGB ColorCraze">
    <div class="color-squares">
        <div id="target-color"></div>
        <div id="user-color"></div>
    </div>
    <div class="slider-container">
        <div class="slider-dot red-dot dot-space" id="red-indicator"></div>
        <div id="red-slider" class="slider"></div>
    </div>
    <div class="slider-container">
        <div class="slider-dot green-dot dot-space" id="green-indicator"></div>
        <div id="green-slider" class="slider"></div>
    </div>
    <div class="slider-container">
        <div class="slider-dot blue-dot dot-space" id="blue-indicator"></div>
        <div id="blue-slider" class="slider"></div>
    </div>
    <div class="button-container">
        <button id="check-button">Check Match</button>
        <button id="reset-button">Reset</button>
    </div>
    <div id="stats">
        <p>Similarity: <span id="similarity">0%</span></p>
        <p>Time: <span id="timer">0 seconds</span></p>
    </div>
    <script>
        const targetColor = document.getElementById("target-color");
        const userColor = document.getElementById("user-color");
        const redSlider = document.getElementById("red-slider");
        const greenSlider = document.getElementById("green-slider");
        const blueSlider = document.getElementById("blue-slider");
        const similarityText = document.getElementById("similarity");
        const timerText = document.getElementById("timer");
        const checkButton = document.getElementById("check-button");
        const resetButton = document.getElementById("reset-button");
        const redDot = document.querySelector(".red-dot");
        const greenDot = document.querySelector(".green-dot");
        const blueDot = document.querySelector(".blue-dot");
        const redIndicator = document.getElementById("red-indicator");
        const greenIndicator = document.getElementById("green-indicator");
        const blueIndicator = document.getElementById("blue-indicator");

        let targetRGB = generateRandomRGB();
        let userRGB = [0, 0, 0];
        let similarityThreshold = 10;
        let timer = 0;
        let timerInterval;

        // Set the initial user color square to black
        userColor.style.backgroundColor = "black";

        targetColor.style.backgroundColor = `rgb(${targetRGB[0]}, ${targetRGB[1]}, ${targetRGB[2]})`;

// Initialize noUiSlider for the red slider
noUiSlider.create(redSlider, {
    start: 0,
    range: {
        min: 0,
        max: 255
    },
    step: 0.01,
});

        // Initialize noUiSlider for the green slider
        noUiSlider.create(greenSlider, {
            start: 0,
            range: {
                min: 0,
                max: 255
            },
            step: 0.01
        });

        // Initialize noUiSlider for the blue slider
        noUiSlider.create(blueSlider, {
            start: 0,
            range: {
                min: 0,
                max: 255
            },
            step: 0.01
        });

        // Update the user color when redSlider value changes
        redSlider.noUiSlider.on("update", function (values, handle) {
            userRGB[0] = parseFloat(values[handle]);
            updateColorDisplay();
        });

        // Update the user color when greenSlider value changes
        greenSlider.noUiSlider.on("update", function (values, handle) {
            userRGB[1] = parseFloat(values[handle]);
            updateColorDisplay();
        });

        // Update the user color when blueSlider value changes
        blueSlider.noUiSlider.on("update", function (values, handle) {
            userRGB[2] = parseFloat(values[handle]);
            updateColorDisplay();
        });

        redSlider.addEventListener("input", updateColorDisplay);
        greenSlider.addEventListener("input", updateColorDisplay);
        blueSlider.addEventListener("input", updateColorDisplay);

        checkButton.addEventListener("click", checkMatch);
        resetButton.addEventListener("click", resetGame);

        function updateColorDisplay() {
            userColor.style.backgroundColor = `rgb(${userRGB[0]}, ${userRGB[1]}, ${userRGB[2]})`;
        }

        function checkMatch() {
            const similarity = calculateSimilarity(targetRGB, userRGB);
            similarityText.textContent = `${similarity.toFixed(2)}%`;

            // Adjust the step size based on the slider's range
            const stepSize = .01; // You can adjust this as needed

            const redPosition = ((targetRGB[0] - redSlider.noUiSlider.options.range.min) /
                (redSlider.noUiSlider.options.range.max - redSlider.noUiSlider.options.range.min)) * 100;

            const greenPosition = ((targetRGB[1] - greenSlider.noUiSlider.options.range.min) /
                (greenSlider.noUiSlider.options.range.max - greenSlider.noUiSlider.options.range.min)) * 100;

            const bluePosition = ((targetRGB[2] - blueSlider.noUiSlider.options.range.min) /
                (blueSlider.noUiSlider.options.range.max - blueSlider.noUiSlider.options.range.min)) * 100;

            redIndicator.style.left = `${redPosition}%`;
            greenIndicator.style.left = `${greenPosition}%`;
            blueIndicator.style.left = `${bluePosition}%`;

            if (similarity >= similarityThreshold) {
                clearInterval(timerInterval);
            }
        }

        function resetGame() {
            targetRGB = generateRandomRGB();
            targetColor.style.backgroundColor = `rgb(${targetRGB[0]}, ${targetRGB[1]}, ${targetRGB[2]})`;
            similarityText.textContent = "0%";
            timer = 0;
            clearInterval(timerInterval);

            // Reset user color square to black
            userColor.style.backgroundColor = "black";

            redIndicator.style.left = "0%";
            greenIndicator.style.left = "0%";
            blueIndicator.style.left = "0%";

            // Reset the sliders
            redSlider.noUiSlider.set(0);
            greenSlider.noUiSlider.set(0);
            blueSlider.noUiSlider.set(0);

            startTimer();
        }

        function generateRandomRGB() {
            return [Math.floor(Math.random() * 256), Math.floor(Math.random() * 256), Math.floor(Math.random() * 256)];
        }

        function calculateSimilarity(color1, color2) {
            const deltaR = color1[0] - color2[0];
            const deltaG = color1[1] - color2[1];
            const deltaB = color1[2] - color2[2];
            const distance = Math.sqrt(deltaR ** 2 + deltaG ** 2 + deltaB ** 2);
            return Math.max(0, 100 - (distance / 255 * 100));
        }

        function startTimer() {
            timerInterval = setInterval(() => {
                timer++;
                timerText.textContent = `${timer} seconds`;
            }, 1000);
        }

        startTimer();
    </script>
</body>
</html>
